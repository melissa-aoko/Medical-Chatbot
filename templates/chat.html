<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediBot - Healthcare Assistant</title>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to bottom, #e8f5e9 0%, #ffffff 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container { max-width: 1000px; margin: 0 auto; }

        .header {
            background: linear-gradient(135deg, #2e7d32, #43a047);
            color: white;
            padding: 30px;
            border-radius: 15px 15px 0 0;
        }

        .header-content { display: flex; align-items: center; gap: 20px; }
        .header-icon { font-size: 48px; }
        .header-text h1 { font-size: 28px; }
        .header-text p { font-size: 14px; opacity: .95; }

        .info-banner {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px 20px;
            margin: 20px 0;
            border-radius: 8px;
            display: flex;
            gap: 15px;
        }

        .chat-container {
            background: white;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,.1);
            overflow: hidden;
        }

        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 25px;
            background: #fafafa;
        }

        .message { display: flex; margin-bottom: 20px; }
        .message.user { justify-content: flex-end; }

        .message-wrapper {
            display: flex;
            max-width: 75%;
            gap: 12px;
        }

        .message.user .message-wrapper { flex-direction: row-reverse; }

        .avatar {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .message.bot .avatar {
            background: linear-gradient(135deg, #2e7d32, #43a047);
            color: white;
        }

        .message.user .avatar {
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            color: white;
        }

        .message-content {
            padding: 14px 18px;
            border-radius: 14px;
            line-height: 1.6;
            background: white;
            border: 1px solid #ddd;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #1976d2, #42a5f5);
            color: white;
            border: none;
        }

        .timestamp {
            font-size: 11px;
            opacity: .6;
            margin-top: 4px;
        }

        .suggestions-section {
            padding: 20px;
            border-top: 1px solid #eee;
        }

        .suggestions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px,1fr));
            gap: 10px;
        }

        .suggestion-btn {
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #c8e6c9;
            background: #f1f8f4;
            cursor: pointer;
            font-weight: 500;
            color: #2e7d32;
        }

        .chat-input-section {
            padding: 20px;
            border-top: 2px solid #eee;
        }

        .input-wrapper { display: flex; gap: 12px; }

        #userInput {
            flex: 1;
            padding: 14px;
            border-radius: 12px;
            border: 2px solid #c8e6c9;
            font-size: 15px;
        }

        #sendBtn {
            padding: 14px 30px;
            background: linear-gradient(135deg, #2e7d32, #43a047);
            border: none;
            color: white;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .footer {
            text-align: center;
            padding: 20px;
            font-size: 13px;
            color: #666;
        }
    </style>
</head>

<body>
<div class="container">

    <div class="header">
        <div class="header-content">
            <div class="header-icon">üè•</div>
            <div class="header-text">
                <h1>MediBot Healthcare Assistant</h1>
                <p>Your AI-powered medical information companion</p>
            </div>
        </div>
    </div>

    <div class="info-banner">
        ‚öïÔ∏è <strong>Medical Information Only:</strong> This is not professional medical advice.
    </div>

    <div class="chat-container">
        <div class="chat-messages" id="chatMessages">
            <div class="message bot">
                <div class="message-wrapper">
                    <div class="avatar">ü§ñ</div>
                    <div>
                        <div class="message-content">
                            Welcome to MediBot! Ask me about symptoms, conditions, or treatments.
                        </div>
                        <div class="timestamp">Now</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="suggestions-section">
            <div class="suggestions-grid">
                <button class="suggestion-btn" onclick="sendExample('What is Acromegaly?')">üìä Acromegaly</button>
                <button class="suggestion-btn" onclick="sendExample('Symptoms of diabetes')">ü©∫ Diabetes</button>
                <button class="suggestion-btn" onclick="sendExample('Hypertension treatment')">üíä Hypertension</button>
                <button class="suggestion-btn" onclick="sendExample('What causes migraines?')">üß† Migraines</button>
            </div>
        </div>

        <div class="chat-input-section">
            <div class="input-wrapper">
                <input id="userInput" placeholder="Ask a medical question..." onkeypress="handleKeyPress(event)">
                <button id="sendBtn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <div class="footer">
        Powered by AI ‚Ä¢ Always consult a healthcare professional
    </div>
</div>

<script>
    const chatMessages = document.getElementById("chatMessages");
    const userInput = document.getElementById("userInput");

    function timeNow() {
        return new Date().toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
    }

    function escapeHTML(text) {
        return text.replace(/[&<>"']/g, m =>
            ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])
        );
    }

    function addMessage(text, user) {
        const div = document.createElement("div");
        div.className = `message ${user ? 'user' : 'bot'}`;
        div.innerHTML = `
            <div class="message-wrapper">
                <div class="avatar">${user ? 'üë§' : 'ü§ñ'}</div>
                <div>
                    <div class="message-content">${escapeHTML(text)}</div>
                    <div class="timestamp">${timeNow()}</div>
                </div>
            </div>`;
        chatMessages.appendChild(div);
        chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    async function sendMessage() {
        const msg = userInput.value.trim();
        if (!msg) return;

        addMessage(msg, true);
        userInput.value = "";

        const res = await fetch("/chat", {
            method: "POST",
            headers: {"Content-Type": "application/json"},
            body: JSON.stringify({ question: msg })
        });

        const data = await res.json();
        addMessage(data.answer || "No response.", false);
    }

    function handleKeyPress(e) {
        if (e.key === "Enter") sendMessage();
    }

    function sendExample(q) {
        userInput.value = q;
        sendMessage();
    }
</script>

</body>
</html>
